{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\91908\\\\Dropbox\\\\My PC (LAPTOP-N7GNE1OQ)\\\\Downloads\\\\Spotify-Clone-master\\\\spotify-clone\\\\src\\\\components\\\\Footer\\\\Footer.js\";\nimport React, { useState, useRef } from 'react';\nimport ReactPlayer from 'react-player/lazy';\nimport './Footer.css';\nimport PlayCircleFilledWhiteOutlinedIcon from '@material-ui/icons/PlayCircleFilledWhiteOutlined';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport ShuffleIcon from '@material-ui/icons/Shuffle';\nimport LoopIcon from '@material-ui/icons/Loop';\nimport PlaylistPlayIcon from '@material-ui/icons/PlaylistPlay';\nimport VolumeUpOutlinedIcon from '@material-ui/icons/VolumeUpOutlined';\nimport PauseCircleOutlineIcon from '@material-ui/icons/PauseCircleOutline';\nimport { Grid, Slider } from \"@material-ui/core\";\nimport { useStateValue } from '../../StateProvider';\n\nconst getTime = secs => {\n  let minutes = 0;\n  let seconds = 0;\n  minutes += Math.floor(secs / 60);\n  seconds += Math.floor(secs) % 60;\n  seconds = seconds === 0 ? `00` : seconds < 10 ? `0${seconds}` : `${seconds}`;\n  return `${minutes}:` + seconds;\n};\n\nexport default function Footer() {\n  var _item$album, _item$album$images, _item$album$images$, _playlist$images, _playlist$images$;\n\n  const [shuffle, setShuffle] = useState(false);\n  const [repeat, setRepeat] = useState(false);\n  const [volume, setVolume] = useState(1);\n  const [playedFraction, setPlayedFraction] = useState(0);\n  const [playedSeconds, setPlayedSeconds] = useState(0);\n  const [totalSeconds, setTotalSeconds] = useState(30); // all songs are 30s preview only\n\n  const [{\n    item,\n    paused,\n    playlist,\n    index\n  }, dispatch] = useStateValue();\n  const ref = useRef();\n\n  const handlePause = () => {\n    dispatch({\n      type: 'SET_PAUSE',\n      paused: !paused\n    });\n  };\n\n  const handleProgress = progress => {\n    setPlayedFraction(progress.played === 1 ? 0 : progress.played);\n    setPlayedSeconds(progress.played === 1 ? 0 : progress.playedSeconds);\n  };\n\n  const handleNext = () => {\n    handleEnd();\n  };\n\n  const handlePrev = () => {\n    dispatch({\n      type: 'SET_PAUSE',\n      paused: false\n    });\n\n    if (index - 1 >= 0) {\n      var _playlist$tracks, _playlist$tracks$item, _playlist$tracks$item2;\n\n      let pos = index - 1;\n      let prevTrack = playlist === null || playlist === void 0 ? void 0 : (_playlist$tracks = playlist.tracks) === null || _playlist$tracks === void 0 ? void 0 : (_playlist$tracks$item = _playlist$tracks.items) === null || _playlist$tracks$item === void 0 ? void 0 : (_playlist$tracks$item2 = _playlist$tracks$item[pos]) === null || _playlist$tracks$item2 === void 0 ? void 0 : _playlist$tracks$item2.track;\n\n      while (prevTrack && !prevTrack.preview_url) {\n        var _playlist$tracks2, _playlist$tracks2$ite, _playlist$tracks2$ite2;\n\n        pos--;\n        prevTrack = playlist === null || playlist === void 0 ? void 0 : (_playlist$tracks2 = playlist.tracks) === null || _playlist$tracks2 === void 0 ? void 0 : (_playlist$tracks2$ite = _playlist$tracks2.items) === null || _playlist$tracks2$ite === void 0 ? void 0 : (_playlist$tracks2$ite2 = _playlist$tracks2$ite[pos]) === null || _playlist$tracks2$ite2 === void 0 ? void 0 : _playlist$tracks2$ite2.track;\n      }\n\n      if (!prevTrack) return;\n      dispatch({\n        type: 'SET_INDEX',\n        index: pos\n      });\n      dispatch({\n        type: 'SET_ITEM',\n        item: prevTrack\n      });\n      dispatch({\n        type: 'SET_PLAYING',\n        playing: prevTrack.id\n      });\n    } else {\n      dispatch({\n        type: 'SET_PLAYING',\n        playing: null\n      });\n    }\n  };\n\n  const handleShuffle = () => {\n    var _playlist$tracks3, _playlist$tracks3$ite;\n\n    if ((playlist === null || playlist === void 0 ? void 0 : (_playlist$tracks3 = playlist.tracks) === null || _playlist$tracks3 === void 0 ? void 0 : (_playlist$tracks3$ite = _playlist$tracks3.items) === null || _playlist$tracks3$ite === void 0 ? void 0 : _playlist$tracks3$ite.length) > 0) {\n      var _playlist$tracks4, _playlist$tracks4$ite, _playlist$tracks4$ite2;\n\n      const max = playlist.tracks.items.length;\n      const min = 0;\n      let pos = Math.floor(Math.random() * (max - min) + min);\n      let res = playlist === null || playlist === void 0 ? void 0 : (_playlist$tracks4 = playlist.tracks) === null || _playlist$tracks4 === void 0 ? void 0 : (_playlist$tracks4$ite = _playlist$tracks4.items) === null || _playlist$tracks4$ite === void 0 ? void 0 : (_playlist$tracks4$ite2 = _playlist$tracks4$ite[pos]) === null || _playlist$tracks4$ite2 === void 0 ? void 0 : _playlist$tracks4$ite2.track;\n\n      while (res && !res.preview_url) {\n        var _playlist$tracks5, _playlist$tracks5$ite, _playlist$tracks5$ite2;\n\n        pos = Math.floor(Math.random() * (max - min) + min);\n        res = playlist === null || playlist === void 0 ? void 0 : (_playlist$tracks5 = playlist.tracks) === null || _playlist$tracks5 === void 0 ? void 0 : (_playlist$tracks5$ite = _playlist$tracks5.items) === null || _playlist$tracks5$ite === void 0 ? void 0 : (_playlist$tracks5$ite2 = _playlist$tracks5$ite[pos]) === null || _playlist$tracks5$ite2 === void 0 ? void 0 : _playlist$tracks5$ite2.track;\n      }\n\n      dispatch({\n        type: 'SET_INDEX',\n        index: pos\n      });\n      dispatch({\n        type: 'SET_ITEM',\n        item: res\n      });\n      dispatch({\n        type: 'SET_PLAYING',\n        playing: res.id\n      });\n    }\n  };\n\n  const handlePlayerChange = v => {\n    setPlayedFraction(v); // update slider position\n\n    setPlayedSeconds(totalSeconds * v);\n    ref.current && ref.current.seekTo(v, 'fraction'); // update player played time\n  };\n\n  const handleEnd = () => {\n    var _playlist$tracks6, _playlist$tracks6$ite;\n\n    dispatch({\n      type: 'SET_PAUSE',\n      paused: false\n    });\n\n    if (shuffle) {\n      handleShuffle();\n      return;\n    } // automatically play next song if there is one\n\n\n    if (index + 1 < (playlist === null || playlist === void 0 ? void 0 : (_playlist$tracks6 = playlist.tracks) === null || _playlist$tracks6 === void 0 ? void 0 : (_playlist$tracks6$ite = _playlist$tracks6.items) === null || _playlist$tracks6$ite === void 0 ? void 0 : _playlist$tracks6$ite.length)) {\n      var _playlist$tracks7, _playlist$tracks7$ite, _playlist$tracks7$ite2;\n\n      let pos = index + 1;\n      let nextTrack = playlist === null || playlist === void 0 ? void 0 : (_playlist$tracks7 = playlist.tracks) === null || _playlist$tracks7 === void 0 ? void 0 : (_playlist$tracks7$ite = _playlist$tracks7.items) === null || _playlist$tracks7$ite === void 0 ? void 0 : (_playlist$tracks7$ite2 = _playlist$tracks7$ite[pos]) === null || _playlist$tracks7$ite2 === void 0 ? void 0 : _playlist$tracks7$ite2.track;\n\n      while (nextTrack && !nextTrack.preview_url) {\n        var _playlist$tracks8, _playlist$tracks8$ite, _playlist$tracks8$ite2;\n\n        pos++;\n        nextTrack = playlist === null || playlist === void 0 ? void 0 : (_playlist$tracks8 = playlist.tracks) === null || _playlist$tracks8 === void 0 ? void 0 : (_playlist$tracks8$ite = _playlist$tracks8.items) === null || _playlist$tracks8$ite === void 0 ? void 0 : (_playlist$tracks8$ite2 = _playlist$tracks8$ite[pos]) === null || _playlist$tracks8$ite2 === void 0 ? void 0 : _playlist$tracks8$ite2.track;\n      }\n\n      if (!nextTrack) return;\n      dispatch({\n        type: 'SET_INDEX',\n        index: pos\n      });\n      dispatch({\n        type: 'SET_ITEM',\n        item: nextTrack\n      });\n      dispatch({\n        type: 'SET_PLAYING',\n        playing: nextTrack.id\n      });\n    } else {\n      dispatch({\n        type: 'SET_PLAYING',\n        playing: null\n      });\n    }\n  }; // safari bowser have this error, first click on the song wont play\n  // pause it and let users click again\n\n\n  const handleError = () => {\n    dispatch({\n      type: 'SET_PAUSE',\n      paused: true\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"footer__left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 9\n    }\n  }, item && /*#__PURE__*/React.createElement(\"img\", {\n    className: \"footer__albumLogo\",\n    src: ((_item$album = item.album) === null || _item$album === void 0 ? void 0 : (_item$album$images = _item$album.images) === null || _item$album$images === void 0 ? void 0 : (_item$album$images$ = _item$album$images[0]) === null || _item$album$images$ === void 0 ? void 0 : _item$album$images$.url) || ((_playlist$images = playlist.images) === null || _playlist$images === void 0 ? void 0 : (_playlist$images$ = _playlist$images[0]) === null || _playlist$images$ === void 0 ? void 0 : _playlist$images$.url),\n    alt: item.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"footer__songInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }, item && item.name), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }\n  }, item && item.artists.map(artist => artist.name).join(', ')))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"footer__center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"footer__centerTop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ShuffleIcon, {\n    className: `footer__toggle ${shuffle && 'footer__green'}`,\n    onClick: () => setShuffle(shuffle => !shuffle),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(SkipPreviousIcon, {\n    className: \"footer__icon\",\n    onClick: handlePrev,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }\n  }), paused ? /*#__PURE__*/React.createElement(PlayCircleFilledWhiteOutlinedIcon, {\n    fontSize: \"large\",\n    className: \"footer__icon\",\n    onClick: handlePause,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 15\n    }\n  }) : /*#__PURE__*/React.createElement(PauseCircleOutlineIcon, {\n    fontSize: \"large\",\n    className: \"footer__icon\",\n    onClick: handlePause,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(SkipNextIcon, {\n    className: \"footer__icon\",\n    onClick: handleNext,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(LoopIcon, {\n    className: `footer__toggle ${repeat && 'footer__green'}`,\n    onClick: () => setRepeat(repeat => !repeat),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"footer__centerBottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      marginRight: '5px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }\n  }, getTime(playedSeconds)), /*#__PURE__*/React.createElement(Slider, {\n    \"aria-labelledby\": \"continuous-slider\",\n    min: 0,\n    max: 1,\n    step: 0.00000001,\n    value: playedFraction,\n    onChange: (e, v) => handlePlayerChange(v),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      marginLeft: '5px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 13\n    }\n  }, getTime(totalSeconds)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"footer__right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(PlaylistPlayIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(VolumeUpOutlinedIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Slider, {\n    \"aria-labelledby\": \"continuous-slider\",\n    defaultValue: 1,\n    min: 0,\n    max: 1,\n    step: 0.001,\n    onChange: (e, v) => setVolume(v),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 15\n    }\n  }))))), //the ref pointing to the ReactPlayer will be used to call seekTo\n  item && /*#__PURE__*/React.createElement(ReactPlayer, {\n    ref: ref,\n    url: item.preview_url,\n    width: 0,\n    height: 0,\n    playing: !paused,\n    volume: volume,\n    loop: repeat,\n    onEnded: handleEnd,\n    onError: handleError,\n    onProgress: progress => handleProgress(progress),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 9\n    }\n  }));\n}","map":{"version":3,"sources":["C:/Users/91908/Dropbox/My PC (LAPTOP-N7GNE1OQ)/Downloads/Spotify-Clone-master/spotify-clone/src/components/Footer/Footer.js"],"names":["React","useState","useRef","ReactPlayer","PlayCircleFilledWhiteOutlinedIcon","SkipPreviousIcon","SkipNextIcon","ShuffleIcon","LoopIcon","PlaylistPlayIcon","VolumeUpOutlinedIcon","PauseCircleOutlineIcon","Grid","Slider","useStateValue","getTime","secs","minutes","seconds","Math","floor","Footer","shuffle","setShuffle","repeat","setRepeat","volume","setVolume","playedFraction","setPlayedFraction","playedSeconds","setPlayedSeconds","totalSeconds","setTotalSeconds","item","paused","playlist","index","dispatch","ref","handlePause","type","handleProgress","progress","played","handleNext","handleEnd","handlePrev","pos","prevTrack","tracks","items","track","preview_url","playing","id","handleShuffle","length","max","min","random","res","handlePlayerChange","v","current","seekTo","nextTrack","handleError","album","images","url","name","artists","map","artist","join","marginRight","e","marginLeft"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react';\nimport ReactPlayer from 'react-player/lazy'\nimport './Footer.css';\nimport PlayCircleFilledWhiteOutlinedIcon from '@material-ui/icons/PlayCircleFilledWhiteOutlined';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport ShuffleIcon from '@material-ui/icons/Shuffle';\nimport LoopIcon from '@material-ui/icons/Loop';\nimport PlaylistPlayIcon from '@material-ui/icons/PlaylistPlay';\nimport VolumeUpOutlinedIcon from '@material-ui/icons/VolumeUpOutlined';\nimport PauseCircleOutlineIcon from '@material-ui/icons/PauseCircleOutline';\nimport { Grid, Slider } from \"@material-ui/core\";\nimport { useStateValue } from '../../StateProvider';\n\nconst getTime = (secs) => {\n  let minutes = 0;\n  let seconds = 0;\n  minutes += Math.floor(secs / 60);\n  seconds += Math.floor(secs) % 60;\n  seconds = seconds === 0 ? `00` : (seconds < 10 ? `0${seconds}` : `${seconds}`);\n  return `${minutes}:` + seconds;\n}\n\nexport default function Footer() {\n  const [shuffle, setShuffle] = useState(false);\n  const [repeat, setRepeat] = useState(false);\n  const [volume, setVolume] = useState(1);\n  const [playedFraction, setPlayedFraction] = useState(0);\n  const [playedSeconds, setPlayedSeconds] = useState(0);\n  const [totalSeconds, setTotalSeconds] = useState(30);   // all songs are 30s preview only\n  const [{ item, paused, playlist, index }, dispatch] = useStateValue();\n  const ref = useRef();\n\n  const handlePause = () => {\n    dispatch({\n      type: 'SET_PAUSE',\n      paused: !paused\n    });\n  }\n\n  const handleProgress = (progress) => {\n    setPlayedFraction(progress.played === 1 ? 0 : progress.played);\n    setPlayedSeconds(progress.played === 1 ? 0 : progress.playedSeconds);\n  }\n\n  const handleNext = () => {\n    handleEnd();\n  }\n\n  const handlePrev = () => {\n    dispatch({\n      type: 'SET_PAUSE',\n      paused: false\n    })\n\n    if(index-1 >= 0) {\n      let pos = index-1;\n      let prevTrack = playlist?.tracks?.items?.[pos]?.track;\n      while(prevTrack && !prevTrack.preview_url) {\n        pos--;\n        prevTrack = playlist?.tracks?.items?.[pos]?.track;\n      }\n\n      if(!prevTrack) return;\n\n      dispatch({\n        type: 'SET_INDEX',\n        index: pos\n      })\n\n      dispatch({\n        type: 'SET_ITEM',\n        item: prevTrack\n      })\n\n      dispatch({\n        type: 'SET_PLAYING',\n        playing: prevTrack.id\n      });\n    }\n    else {\n      dispatch({\n        type: 'SET_PLAYING',\n        playing: null\n      });\n    }\n  }\n\n  const handleShuffle = () => {\n    if(playlist?.tracks?.items?.length > 0) {\n      const max = playlist.tracks.items.length;\n      const min = 0;\n      let pos = Math.floor(Math.random() * (max - min) + min);\n      let res = playlist?.tracks?.items?.[pos]?.track;\n      while(res && !res.preview_url) {\n        pos = Math.floor(Math.random() * (max - min) + min);\n        res = playlist?.tracks?.items?.[pos]?.track;\n      }\n\n      dispatch({\n        type: 'SET_INDEX',\n        index: pos\n      })\n\n      dispatch({\n        type: 'SET_ITEM',\n        item: res\n      })\n\n      dispatch({\n        type: 'SET_PLAYING',\n        playing: res.id\n      });\n    }\n  }\n\n  const handlePlayerChange = (v) => {\n    setPlayedFraction(v);     // update slider position\n    setPlayedSeconds(totalSeconds * v);\n    ref.current && ref.current.seekTo(v, 'fraction');  // update player played time\n  }\n\n  const handleEnd = () => {\n    dispatch({\n      type: 'SET_PAUSE',\n      paused: false\n    })\n\n    if(shuffle) {\n      handleShuffle();\n      return;\n    }\n\n    // automatically play next song if there is one\n    if(index+1 < playlist?.tracks?.items?.length) {\n      let pos = index+1;\n      let nextTrack = playlist?.tracks?.items?.[pos]?.track;\n      while(nextTrack && !nextTrack.preview_url) {\n        pos++;\n        nextTrack = playlist?.tracks?.items?.[pos]?.track;\n      }\n\n      if(!nextTrack) return;\n\n      dispatch({\n        type: 'SET_INDEX',\n        index: pos\n      })\n\n      dispatch({\n        type: 'SET_ITEM',\n        item: nextTrack\n      })\n\n      dispatch({\n        type: 'SET_PLAYING',\n        playing: nextTrack.id\n      });\n    }\n    else {\n      dispatch({\n        type: 'SET_PLAYING',\n        playing: null\n      });\n    }\n  }\n\n  // safari bowser have this error, first click on the song wont play\n  // pause it and let users click again\n  const handleError = () => {\n    dispatch({\n      type: 'SET_PAUSE',\n      paused: true\n    })\n  }\n\n  return (\n    <>\n      <div className=\"footer\">\n        <div className=\"footer__left\">\n          {\n            item &&\n            <img\n              className=\"footer__albumLogo\"\n              src={(item.album?.images?.[0]?.url) || playlist.images?.[0]?.url}\n              alt={item.name}\n            />\n          }\n          <div className=\"footer__songInfo\">\n            <h4>{item && item.name}</h4>\n            <p>{item && item.artists.map(artist => artist.name).join(', ')}</p>\n          </div>\n        </div>\n\n        <div className=\"footer__center\">\n          <div className=\"footer__centerTop\">\n            <ShuffleIcon\n              className={`footer__toggle ${shuffle && 'footer__green'}`}\n              onClick={() => setShuffle(shuffle => !shuffle)}\n            />\n            <SkipPreviousIcon\n              className=\"footer__icon\"\n              onClick={handlePrev}\n            />\n            {\n              paused ?\n              <PlayCircleFilledWhiteOutlinedIcon\n                fontSize=\"large\"\n                className=\"footer__icon\"\n                onClick={handlePause}\n              /> :\n              <PauseCircleOutlineIcon\n                fontSize=\"large\"\n                className=\"footer__icon\"\n                onClick={handlePause}\n              />\n            }\n            <SkipNextIcon\n              className=\"footer__icon\"\n              onClick={handleNext}\n            />\n            <LoopIcon\n              className={`footer__toggle ${repeat && 'footer__green'}`}\n              onClick={() => setRepeat(repeat => !repeat)}\n            />\n          </div>\n          <div className=\"footer__centerBottom\">\n            <p style={{ marginRight: '5px' }}>{getTime(playedSeconds)}</p>\n            <Slider\n              aria-labelledby=\"continuous-slider\"\n              min={0}\n              max={1}\n              step={0.00000001}\n              value={playedFraction}\n              onChange={(e, v) => handlePlayerChange(v)}\n            />\n            <p style={{ marginLeft: '5px' }}>{getTime(totalSeconds)}</p>\n          </div>\n        </div>\n\n        <div className=\"footer__right\">\n          <Grid container spacing={2}>\n            <Grid item>\n              <PlaylistPlayIcon />\n            </Grid>\n            <Grid item>\n              <VolumeUpOutlinedIcon />\n            </Grid>\n            <Grid item xs>\n              <Slider\n                aria-labelledby=\"continuous-slider\"\n                defaultValue={1}\n                min={0}\n                max={1}\n                step={0.001}\n                onChange={(e, v) => setVolume(v)}\n              />\n            </Grid>\n          </Grid>\n        </div>\n      </div>\n      {\n        //the ref pointing to the ReactPlayer will be used to call seekTo\n        item &&\n        <ReactPlayer\n          ref={ref}\n          url={item.preview_url}\n          width={0}\n          height={0}\n          playing={!paused}\n          volume={volume}\n          loop={repeat}\n          onEnded={handleEnd}\n          onError={handleError}\n          onProgress={progress => handleProgress(progress)}\n        />\n      }\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}